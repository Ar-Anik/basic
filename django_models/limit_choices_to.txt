Q : What limit_choices_to Does?
-> limit_choices_to is an option/argument we can use in Django relational fields like:
- ForeignKey
- OneToOneField
- ManyToManyField

It is used to limit the choices that appear in a Django admin form or ModelForm — not to restrict database queries or
inserts directly.

# Syntax
field_name = models.ForeignKey(
    OtherModel,
    on_delete=models.CASCADE,
    limit_choices_to={...}
)


# Example-1
class Department(models.Model):
    name = models.CharField(max_length=100)
    active = models.BooleanField(default=True)

    def __str__(self):
        return self.name


class Employee(models.Model):
    name = models.CharField(max_length=100)
    department = models.ForeignKey(
        Department,
        on_delete=models.CASCADE,
        limit_choices_to={'active': True}      # Only show active departments
    )

    def __str__(self):
        return self.name

When we open the Django Admin or a ModelForm for Employee, the dropdown for department will only show departments where active=True.

# using Q object for OR operation
from django.db.models import Q

class Employee(models.Model):
    name = models.CharField(max_length=100)
    department = models.ForeignKey(
        Department,
        on_delete=models.CASCADE,
        limit_choices_to=Q(active=True) | Q(name__icontains='HR')
    )

Now only these departments will appear as choices:
- Active departments
- OR any department whose name contains “HR”


-> limit_choices_to only affects form/UI choices (admin or ModelForm). It does not prevent saving invalid values
in code or via direct ORM queries. Example :

# This will still work even if department is inactive
dept = Department.objects.create(name="Finance", active=False)
emp = Employee.objects.create(name="John", department=dept)


# Example in OneToOneField
class UserProfile(models.Model):
    user = models.OneToOneField(
        User,
        on_delete=models.CASCADE,
        limit_choices_to={'is_staff': True}     # Only staff users can be linked
    )
